#!/bin/bash

# Command Directory
WORK_DIR=$(pwd)

# Switch to Directory
BASE_PATH=$(
    cd $(dirname "$0")
    dirname `pwd`
)

# Introduce Configuration
source "${BASE_PATH}/.env"

# Get project directory
projects_dir=$(
    cd "${BASE_PATH}/${PROJECT_DIR}"
    pwd
)

# Relative Path
workdir=''
if [[ $RUN_DIR == $projects_dir* ]]; then
    workdir='/var/www/html/'
    relative_path=${RUN_DIR//${projects_dir}/}
fi

# DEBUG Show
if [ "$DEBUG" == "true" ]; then
    echo "WORK_DIR: ${WORK_DIR}"
    echo "RUN_DIR: ${RUN_DIR}"
    echo "BASE_PATH: ${BASE_PATH}"
    echo "projects_dir: ${projects_dir}"
    echo "relative_path: ${relative_path}"
fi

docker_compose() {
    docker compose -f "${BASE_PATH}/docker-compose.yml" $@
}
